/*
 * ESP_Program.c
 *
 *  Created on: Nov 30, 2023
 *      Author: lenovo
 */

#include "../../lib/STD_TYPES.h"
#include "../../lib/BIT_MATH.h"

#include"ESP_Interface.h"
#include "../../MCAL/GPIO/GPIO_Interface.h"
#include "../../MCAL/UART/UART_Interface.h"
#include "../../MCAL/SYSTICK/SYSTICK_Interface.h"

void ESP_Init(void)
{
	u8 result=0;

	while(result==0)

	{	//ECHO_DISABLE:
		UART_Send_String("ATE0\r\n");

		//check for comand ok
		result=ESP_ValidComand();
	}
	result=0;
	while(result==0)
	{
		//ENABLE ESP STATION MODE :
		UART_Send_String("AT+CWMODE=1\r\n");

		//check for comand ok
		result=ESP_ValidComand();
	}

}

u8 ESP_ValidComand(void)
{
	u16 timeout=0;
	u8 response[100]={0};
while (timeout==10000)
{
	response[i]=UART_Recieve();
	timeout++;
}

}

void ESP_ConnectRouter(void)
{
	UART_Send_String("AT+CWJAP_CUR=Fiber,P@ssw0rdMCIT\r\n");
}

void ESP_ConnectWeb(void)
{
	UART_Send_String("AT+CIPSTART=TCP,185.176.43.108,80");
}

void ESP_SendInstructions(c8*ins,c8*size)
{
	UART_Send_String(size);
	UART_Send_String(ins);

}

